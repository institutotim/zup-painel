<div class="modal-header">
  <button type="button" class="close" ng-click="vm.close()">&times;</button>
  <h4 class="modal-title" ng-if="vm.isUpdating">Atualizar usuário</h4>
  <h4 class="modal-title" ng-if="!vm.isUpdating">Novo usuário</h4>
</div>

<div class="modal-body">

  <div class="rounder_wrapper errors" ng-show="vm.errors">
    <div class="alert alert-danger fade-animation">
      <p ng-bind-html="vm.errors | formatErrors" ng-if="vm.isObject(vm.errors)"></p>
      <p ng-bind-html="vm.errors" ng-if="!vm.isObject(vm.errors)"></p>
    </div>
  </div>

  <form name="form">
    <div class="form-group" ng-class="{'has-error': form.name.$dirty && form.name.$invalid}">
      <label for="form_username">Nome completo *</label>
      <input type="text" class="form-control input-lg" id="form_username" ng-model="vm.user.name" generic-input name="name" required>
    </div>

    <div class="form-group" ng-class="{'has-error': form.email.$dirty && form.email.$invalid}">
      <label for="form_email">Email *</label>
      <input type="email" class="form-control custom_form" id="form_email" ng-model="vm.user.email" generic-input name="email" required>
    </div>

    <div class="form-group" ng-class="{'has-error': form.document.$dirty && form.document.$invalid}">
      <label for="form_document">Documento CPF *</label>
      <input type="text" class="form-control custom_form" id="form_document" ng-model="vm.user.document" generic-input name="document" ui-mask="999.999.999-99" ng-cpf required>
    </div>

    <div class="form-group" ng-class="{'has-error': form.phone.$dirty && form.phone.$invalid}">
      <label for="form_phone">Telefone</label>
      <input type="text" class="form-control custom_form" id="form_phone" ng-model="vm.user.phone" generic-input name="phone" ui-mask="(99) 99999999?9">
    </div>

    <div class="form-group" ng-class="{'has-error': form.birthdate.$dirty && form.birthdate.$invalid}">
      <label for="form_birthdate">Data de nascimento</label>
      <input type="text" class="form-control input-lg" id="form_birthdate" ng-model="vm.user.birthdate" ui-mask="99/99/9999" model-view-value="true" generic-input name="birthdate">
    </div>


    <div class="form-group" ng-class="{'has-error': form.address.$dirty && form.address.$invalid}">
      <label for="form_address">Endereço</label>
      <input type="text" class="form-control custom_form" id="form_address" ng-model="vm.user.address" generic-input name="address">
    </div>

    <div class="form-group" ng-class="{'has-error': form.address_additional.$dirty && form.address_additional.$invalid}">
      <label for="form_address_additional">Complemento</label>
      <input type="text" class="form-control custom_form" id="form_address_additional" ng-model="vm.user.address_additional" generic-input name="address_additional">
    </div>

    <div class="form-group" ng-class="{'has-error': form.district.$dirty && form.district.$invalid}">
      <label for="form_district">Bairro</label>
      <input type="text" class="form-control custom_form" id="form_district" ng-model="vm.user.district" generic-input name="district">
    </div>

    <div class="form-group" ng-class="{'has-error': form.city.$dirty && form.city.$invalid}">
      <label for="form_city">Cidade</label>
      <input type="text" class="form-control custom_form" id="form_city" ng-model="vm.user.city" generic-input name="city">
    </div>

    <div class="form-group" ng-class="{'has-error': form.postal_code.$dirty && form.postal_code.$invalid}">
      <label for="form_postal_code">CEP</label>
      <input type="text" class="form-control custom_form" id="form_postal_code" ng-model="vm.user.postal_code" generic-input name="postal_code" ui-mask="99999-999">
    </div>

    <div class="form-group" ng-class="{'has-error': form.institution.$dirty && form.institution.$invalid}">
      <label for="form_institution">Instituto</label>
      <input type="text" class="form-control custom_form" id="form_institution" ng-model="vm.user.institution" generic-input name="institution">
    </div>

    <div class="form-group" ng-class="{'has-error': form.position.$dirty && form.position.$invalid}">
      <label for="form_position">Cargo</label>
      <input type="text" class="form-control custom_form" id="form_position" ng-model="vm.user.position" generic-input name="position">
    </div>

    <div class="form-group" ng-class="{'has-error': form.commercial_phone.$dirty && form.commercial_phone.$invalid}">
      <label for="form_commercial_phone">Telefone Comercial</label>
      <input type="text" class="form-control custom_form" id="form_commercial_phone" ng-model="vm.user.commercial_phone" generic-input name="commercial_phone" ui-mask="(99) 99999999?9">
    </div>

    <div class="form-group" ng-class="{'has-error': form.skype.$dirty && form.skype.$invalid}">
      <label for="form_skype">Skype</label>
      <input type="text" class="form-control input-lg" id="form_skype" ng-model="vm.user.skype" generic-input name="skype">
    </div>

    <p ng-if="!vm.isUpdating">A senha do usuário será enviado para o email de cadastro.</p>
  </form>
</div>

<div class="modal-footer">
  <button type="button"
          class="btn btn-info btn-custom btn-fat-custom"
          ng-click="vm.save()"
          ng-disabled="form.$invalid"
          promise-btn>Salvar</button>
</div>
